extends default_web_logged-in_layout.pug

block styles
  link(rel="stylesheet", href="/css/checkout.css")

block content
  .checkout-container
    h1 My Checkout
    
    // Display total amount
    h2 Total amount: £#{totalAmount}
    
    // Check if there are items in the cart
    if cartItems && cartItems.length > 0
      each item in cartItems
        .checkout-item
          img(src=item.image, alt=item.name)
          .item-details
            h3 #{item.name}
            p Description: #{item.description}
            p Misuse Penalty: £#{item.penalty !== null && typeof item.penalty === 'number' ? item.penalty.toFixed(2) : 'N/A'}
            p Transaction ID: #{transactionId}
          hr

      // Terms and conditions section
      .terms
        p By clicking "Shipping", you accept the terms and potential penalties associated with the items.
        a(href="/terms-and-conditions") See Terms and Conditions

      .navigation-buttons
        a(href="/cart") ← Return to Cart
        button(onclick=`location.href='/delivery/${transactionId}'`) Shipping
    else
      p Your cart is empty.
      a(href="/") ← Back to Home

  if cartItems
    script.
      console.log('Cart Items in Pug:', !{JSON.stringify(cartItems)})
  else
    script.
      console.log('Cart Items is undefined or null.')